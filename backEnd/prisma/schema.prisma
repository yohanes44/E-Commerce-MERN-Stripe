// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:@localhost:3306/ecommerceapi"
}

model User {
  id        Int         @id @default(autoincrement())
  firstName String      @db.VarChar(255)
  lastName  String      @db.VarChar(255)
  email     String      @unique @db.VarChar(255)
  password  String      @db.VarChar(255)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  
  User_role User_role[]
  Order     Order[]
  Cart      Cart[]
}

model Role {
  id        Int         @id @default(autoincrement())
  name      String      @db.VarChar(255)
  User_role User_role[]
} 

  model User_role {
    id     Int @id @default(autoincrement())
    userId Int
    roleId Int

    user User @relation(fields: [userId], references: [id], onDelete: Cascade )
    role Role @relation(fields: [roleId], references: [id])
  }

model Product {
  id       Int     @id @default(autoincrement())
  name     String  @db.VarChar(255)
  desc     String  @db.VarChar(255)
  img      String  @db.VarChar(255)
  brand    String  @db.VarChar(255)
  color  Json[] 
  size     String  @db.VarChar(255)
  categoryId Int
  price    Int
  isActive Boolean @default(true)
  quantity Int
  category Category   @relation(fields: [categoryId], references: [id])
  Cart     Cart[]
}

model Category {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)
  img String  @db.VarChar(255)
  Product     Product[]
}

model Order {
  id       Int    @id @default(autoincrement())
  state    String @db.VarChar(255)
  userId   Int
  city     String @db.VarChar(255)
  sub_city String @db.VarChar(255)
  phone    String @db.VarChar(255)
  total    Int

  user User   @relation(fields: [userId], references: [id])
  Cart Cart[]
}

model Cart {
  id        Int    @id @default(autoincrement())
  productId Int
  userId    Int
  orderId   Int?
  state     String @db.VarChar(255)
  quantity  Int

  user    User    @relation(fields: [userId], references: [id])
  order   Order?   @relation(fields: [orderId], references: [id])
  product Product @relation(fields: [productId], references: [id])
}
